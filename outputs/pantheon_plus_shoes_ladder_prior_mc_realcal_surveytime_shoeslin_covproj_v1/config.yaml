run:
  run_id: pantheon_plus_shoes_ladder_prior_mc_realcal_surveytime_shoeslin_covproj_v1
  out_base: outputs
  tasks:
    - baseline_fit
    - prior_mc
    - report

anchor:
  H0: 67.4
  Omega_m: 0.315
  Omega_k: 0.0
  rd_Mpc: 147.09

probe:
  name: pantheon_plus_shoes_ladder
  raw_dat_path: data/raw/pantheon_plus_shoes/Pantheon+SH0ES.dat
  raw_cov_path: data/raw/pantheon_plus_shoes/Pantheon+SH0ES_STAT+SYS.cov
  include_calibrators: true
  include_hubble_flow: true
  z_column: zHD
  z_hf_min: 0.023
  z_hf_max: 0.15

model:
  ladder_level: L2
  shared_scale:
    enable: true
    params: [delta_lnH0]
    prior_sigma: 0.5
  priors:
    sigma_global_offset_mag: 10.0
    sigma_survey_offset_mag: 0.2
    sigma_overrides_path: data/processed/external_calibration/pantheon_plus_shoes_sigma_overrides_realcal_surveytime_shoeslin_covproj_v1.json

prior_mc:
  seed: 123
  n_mc: 20000
  use_diagonal_errors: true
  param_of_interest: delta_lnH0
  # Reference “full tension” scale: ln(73/67.4) ≈ 0.0798.
  tension_target: 0.0798144232
  sigma_overrides_path: data/processed/external_calibration/pantheon_plus_shoes_sigma_overrides_realcal_surveytime_shoeslin_covproj_v1.json
  components:
    - label: calibrator_offset_mag
      mechanism: calibrator_offset_mag
      fallback_sigma_mag: 0.03

    - label: cal_survey_offset_mag
      mechanism: cal_survey_offset_mag
      fallback_sigma_mag: 0.02

    - label: hf_survey_offset_mag
      mechanism: hf_survey_offset_mag
      fallback_sigma_mag: 0.02

    - label: pkmjd_bin_offset_mag_cal
      mechanism: pkmjd_bin_offset_mag
      edges: [44672.6, 53410.4, 54131.12, 54885.0, 57269.22, 59385.6]
      bins: [1, 2, 3, 4]
      apply_to: cal
      fallback_sigma_mag: 0.02

    - label: survey_pkmjd_bin_offset_mag_cal
      mechanism: survey_pkmjd_bin_offset_mag
      edges: [44672.6, 53410.4, 54131.12, 54885.0, 57269.22, 59385.6]
      bins: [1, 2, 3, 4]
      apply_to: cal
      fallback_sigma_mag: 0.02

    - label: c_linear_mag_cal
      mechanism: c_linear_mag
      apply_to: cal
      fallback_sigma_mag: 0.03

    - label: x1_linear_mag_cal
      mechanism: x1_linear_mag
      apply_to: cal
      fallback_sigma_mag: 0.03

    - label: biascor_m_b_linear_mag_cal
      mechanism: biascor_m_b_linear_mag
      apply_to: cal
      fallback_sigma_mag: 0.03

    - label: mwebv_linear_mag_cal
      mechanism: mwebv_linear_mag
      apply_to: cal
      fallback_sigma_mag: 0.03

    - label: pkmjd_err_linear_mag_cal
      mechanism: pkmjd_err_linear_mag
      apply_to: cal
      fallback_sigma_mag: 0.05

    - label: host_mass_step_mag_cal
      mechanism: host_mass_step_mag
      threshold: 10.0
      apply_to: cal
      fallback_sigma_mag: 0.05

